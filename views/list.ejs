<!DOCTYPE html>
<html lang="ko">
<head>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/style/list.css">
    <meta
        name="viewport"
        content="width=device-width", initial-scale="1.0"
        user-scaleable="yes">
        
    <style>
    </style>
</head>
<body>
    <div class="wrap">
        <%-include('head.ejs') %>
            <div id="list">
                <h1>글 목록 (<%=count%>)</h1>
                <br>
                <br>
                <ul>
                <%for(var i=0; i<posts.length; i++){%>
                <a href="/detail/<%= posts[i]._id %>"><li><h2>글제목 : <%=posts[i].제목%></h2></a>
                    <button class="delete" data-id="<%= posts[i]._id %>">삭제</button>
                    <button class="edit"><a href= "/edit/<%=posts[i]._id%>">수정</a></button>
                    <span>❤️0</span>
                    <br>
                    <br>
                    <hr>
                </li>
                <% }%>
                </ul>
            </div>


            <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
            <script>
               $('.delete').click(function(e){

                  $.ajax({
                  method : 'DELETE',
                  url : '/delete',
                  data : {_id : e.target.dataset.id}
                  }).done((결과)=>{
                    console.log("성공")
                    $(this).parent('li').fadeOut();
                  }).fail(()=>{
        
                  })
                })
             
            </script>
           
        </div>
        <!--main-->
    